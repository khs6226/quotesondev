jQuery(e=>{const t=e("#quote-button"),o=e(".entry-content"),n=e(".entry-meta"),r=e(".submit-button");window.addEventListener("popstate",function(){window.location=window.location}),t.on("click",function(t){t.preventDefault(),e.ajax({method:"GET",url:qod_vars.rest_url+"wp/v2/posts?filter[orderby]=rand&filter[posts_per_page]=1",beforesend:function(e){e.setRequestHeader("X-WP-Nonce",qod_vars.wpapi_nonce)}}).done(function(e){history.pushState("","",e[0].link),o.empty().append(`<p>${e[0].content.rendered}</p>`),n.empty().append(`<h2 class="entry-title">&#8212 ${e[0].title.rendered}</h2>\n                    <span class="source">\n                        <a href="${e._qod_quote_source_url}">\n                        ${e._qod_quote_source}</a>\n                    </span>`)})}),r.on("click",function(t){t.preventDefault();let o=e(".author").val(),n=e(".content").val(),r=e(".source").val(),a=e(".url").val();""===o?(alert("Please provide the author of the quote."),e(".author").focus()):""===n?(alert("Please provide the quote."),e(".content").focus()):""===r?(alert("Please provide the source of the quote."),e(".source").focus()):e.ajax({method:"POST",url:qod_vars.rest_url+"wp/v2/posts/",data:{title:o,content:n,quote_source:r,quote_url:a,post_status:"pending"},beforesend:function(e){e.setRequestHeader("X-WP-Nonce",qod_vars.wpapi_nonce)}}).done(function(){alert("Thank you for submitting your quote!"),e(".submit-form")[0].reset()}).fail(function(){alert("Please try again."),e(".submit-form")[0].reset()})})});